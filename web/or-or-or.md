# 쿠키 | 웹 스토리지 | 토큰 | 세션

## 쿠키

### 배경

* HTTP는 stateless 하다는 특징을 가지고 있음
  * 비연결성
  * 무상태성
  * 매 요청이 독립적이기 때문에 서버는 클라이언트를 기억하지 못함
* 다음 연결 때 서버는 클라이언트를 같은 유저로 식별할 수 없음

**그래서 쿠키가 탄생하게 되었다**

### 특징

* 4KB의 비교적 작은 용량
* 서버에 리소스 요청 시 자동으로 요청 헤더에 담겨 전달됨
* 만료 기간을 설정할 수 있음

### 단점

* 모든 쿠키가 자동으로 요청 헤더에 전달되기 때문에 불필요한 트래픽 증가
* 보안 취약점: XSS/CSRF 공격에 취약
  * XSS(Cross Site Scripting)
  * CSRF(Cross Site Request Forgery)
    * 사이트 간 요청 위조
    * 쿠키를 탈취하여 생성/수정/삭제 요청
  * ✅ 해결 방법
    * httpOnly 쿠키 사용하기
    * sequre 모드로 https에서만 사용하기
    * samesite 옵션 사용하기

## 웹 스토리지

* HTML5부터 사용 가능한 API
* 브라우저에 저장되는 key: value 조합의 문자열

|       | 로컬 스토리지    | 세션 스토리지  |
| ----- | ---------- | -------- |
| 유지 단위 | 브라우저      | 브라우저 내 탭 |
| 만료 기간 | 삭제 전까지 영구적 | 탭 종료 시까지 |

### 특징

* 5MB 가량의 정보 저장 가능
* 자동으로 서버로 전송되지 않음
* 오리진 단위로 접근 가능
  * **오리진**: 프로토콜://도메인:포트번호
* 만료 기간 설정 불가
* XSS 공격에 취약
* 미지원 브라우저 대응 필요
